git:
  prefix: omeg/qubes-
  branch: omeg/builder-v2
  maintainers:
    # marmarek
    - '0064428F455451B3EBE78A7F063938BA42CFA724'
    # simon
    - '274E12AB03F2FE293765FC06DA0434BC706E1FCF'
    # omeg
    - 'CE8060B48282B234AE0A7815D32BF219E67BA830'

#increment-devel-versions: true

debug: true
verbose: true

skip-git-fetch: false

executor:
  type: docker
  options:
    image: "qubes-builder-fedora:latest"

# this is for anything other than building, so source fetching etc
#executor:
#  type: qubes
#  options:
#    dispvm: qubes-builder-dvm

# dev only
insecure-skip-checking:
  - vmm-xen-windows-pvdrivers
  - core-vchan-xen
  - windows-utils
  - core-qubesdb
  - core-agent-windows
  - gui-common
  - gui-agent-windows
  - installer-windows-tools

distributions:
  - vm-win10:
      stages:
        - build:
            configuration: release
            sign-qube: vault-win
            sign-key-name: "Qubes Windows Tools"
            test-sign: true
            executor:
              type: windows
              options:
                vm: win-build
                ssh-key: /home/user/.ssh/win-build.key
                ewdk: tools/windows/ewdk.iso
                threads: 1


components:
  - vmm-xen-windows-pvdrivers
  - core-vchan-xen
  - windows-utils
  - core-qubesdb
  - core-agent-windows
  - gui-common
  - gui-agent-windows
  - installer-windows-tools
